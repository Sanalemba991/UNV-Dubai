const D=new Date().getFullYear(),O=document.getElementById("current-year");O.innerText=D.toString();document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("main-nav"),a=document.getElementById("menu-toggle"),s=document.getElementById("mobile-menu"),f=document.getElementById("nav-spacer"),c=document.getElementById("main-mobile-menu"),i=document.getElementById("products-mobile-menu"),H=document.getElementById("show-products-menu-button"),T=document.getElementById("back-to-main-menu-button"),d=document.getElementById("mobile-products-dropdown-button"),o=document.getElementById("mobile-products-dropdown"),y=d?.querySelector("svg:last-child");let n=!1,r=!1,l=t?.offsetHeight||64,g,L=0;function p(){const e=c?.scrollHeight||0,u=i?.scrollHeight||0,m=(o?.scrollHeight||0)+45;return{totalHeight:r?e+u+m:e+m}}function v(e=l){f&&(f.style.marginTop=`${e}px`)}function h(){const{totalHeight:e}=p();n&&s&&(s.style.maxHeight=`${e+60}px`,v(l+e+60))}function E(){n=!n,a?.setAttribute("aria-expanded",n.toString()),s?.setAttribute("aria-hidden",(!n).toString()),n?h():(s.style.maxHeight="0",r=!1,c?.classList.remove("hidden"),i?.classList.add("hidden"),v())}function x(){r=!0,c?.classList.add("hidden"),i?.classList.remove("hidden"),h()}function A(){r=!1,i?.classList.add("hidden"),c?.classList.remove("hidden"),h()}function C(){if(!d||!o)return;const e=d.getAttribute("aria-expanded")==="true";d.setAttribute("aria-expanded",(!e).toString()),o.classList.toggle("hidden"),o.setAttribute("aria-hidden",e.toString()),y?.classList.toggle("rotate-180"),h()}function q(){const e=window.location.pathname;document.querySelectorAll(".nav-link, .mobile-nav-link").forEach(u=>{try{const m=new URL(u.href,window.location.origin),w=B=>B!=="/"?B.replace(/\/$/,""):B,b=w(e),M=w(m.pathname),z=b===M,Y=M!=="/"&&b.startsWith(M+"/"),P=M==="/products"&&(b.startsWith("/categories")||b.startsWith("/categories/")),k=z||Y||P;u.classList.toggle("active",k);const S=u.querySelector(".mobile-nav-icon");S&&(S.classList.toggle("text-blue-600",k),S.classList.toggle("dark:text-blue-400",k))}catch(m){console.error("Error processing link:",m)}})}a?.addEventListener("click",E),H?.addEventListener("click",x),T?.addEventListener("click",A),d?.addEventListener("click",C),document.querySelectorAll("#mobile-menu a:not(#show-products-menu-button)").forEach(e=>{e.addEventListener("click",()=>n&&E())}),window.addEventListener("resize",()=>{clearTimeout(g),g=setTimeout(()=>{l=t?.offsetHeight||64,window.innerWidth>=1024?(n=!1,r=!1,s.style.maxHeight="",c?.classList.remove("hidden"),i?.classList.add("hidden"),a?.setAttribute("aria-expanded","false"),s?.setAttribute("aria-hidden","true"),v()):n&&h()},100)}),t&&window.addEventListener("scroll",()=>{const e=window.scrollY>10;t.classList.toggle("shadow-lg",e),t.classList.toggle("bg-gray-200",e),t.classList.toggle("dark:bg-gray-900",e),t.classList.toggle("shadow-sm",!e),t.classList.toggle("bg-gray-200/90",!e),t.classList.toggle("dark:bg-gray-900/90",!e)}),document.addEventListener("touchstart",e=>{L=e.touches[0].clientY},{passive:!0}),document.addEventListener("touchmove",e=>{if(!n)return;L-e.touches[0].clientY<-40&&E()},{passive:!0}),document.addEventListener("keydown",e=>{e.key==="Escape"&&n&&E()}),document.querySelectorAll("a").forEach(e=>{e.addEventListener("click",()=>{setTimeout(q,50)})}),q(),v()});document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("dropdown-content-container"),a=document.querySelector('a[href="/categories/ip-cameras"]'),s=document.querySelector('a[href="/categories/analog-cameras"]'),f=document.querySelector('a[href="/categories/ptz-cameras"]'),c=document.querySelector('a[href="/categories/dvr"]'),i=document.querySelector('a[href="/categories/accessories"]'),H=document.querySelector('a[href="/categories/thermal-cameras"]'),T=document.querySelector('a[href="/categories/nvr"]'),d=document.querySelector('a[href="/categories/storage"]'),o=document.getElementById("network-cameras-content"),y=document.getElementById("analog-cameras-content"),n=document.getElementById("ptz-cameras-content"),r=document.getElementById("dvr-systems-content"),l=document.getElementById("accessories-content"),g=document.getElementById("thermal-cameras-content"),L=document.getElementById("nvr-systems-content"),p=document.getElementById("storage-content");o&&(t.innerHTML=o.innerHTML),a.addEventListener("mouseenter",function(){o&&(t.innerHTML=o.innerHTML)}),s.addEventListener("mouseenter",function(){y&&(t.innerHTML=y.innerHTML)}),f.addEventListener("mouseenter",function(){n&&(t.innerHTML=n.innerHTML)}),c.addEventListener("mouseenter",function(){r&&(t.innerHTML=r.innerHTML)}),i.addEventListener("mouseenter",function(){l&&(t.innerHTML=l.innerHTML)}),H.addEventListener("mouseenter",function(){g&&(t.innerHTML=g.innerHTML)}),T.addEventListener("mouseenter",function(){L&&(t.innerHTML=L.innerHTML)}),d.addEventListener("mouseenter",function(){p&&(t.innerHTML=p.innerHTML)})});const W=document.getElementById("dropdown-container"),I=document.querySelectorAll(".dropdown-category");I.forEach(t=>{t.addEventListener("mouseenter",()=>{I.forEach(a=>a.classList.remove("bg-blue-100","dark:bg-blue-900/30","dark:bg-gray-700/50")),t.classList.add("bg-blue-100"),t.classList.contains("dark:hover:bg-blue-900/30")?t.classList.add("dark:bg-blue-900/30"):t.classList.add("dark:bg-gray-700/50"),t.getAttribute("data-category")})});W.addEventListener("mouseleave",()=>{I.forEach(t=>t.classList.remove("bg-blue-100","dark:bg-blue-900/30","dark:bg-gray-700/50"))});

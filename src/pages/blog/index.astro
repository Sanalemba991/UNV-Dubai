---
import Layout from "../../layouts/Layout.astro";
import { getCollection } from "astro:content";

// Fetch blog posts dynamically from the 'blog' collection
const allPosts = await getCollection("blog");

// Limit the posts to only 2
const posts = allPosts.slice(0, 2); // Display the first 2 posts
---

<Layout>
  <div class="container mx-auto px-4 py-8">
    <h1 class="text-4xl text-center mb-8">Link Technology Blogs</h1>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 justify-center">
      {
        posts.map((post) => (
          <a
            href={`/blog/${post.slug}`}
            key={post.slug} 
            class="block bg-white rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 overflow-hidden relative group"
          >
            <div class="relative">
              {/* Larger Image with Hover Effect */}
              {post.data.cardImage && (
                <div class="relative overflow-hidden">
                  <img
                    src={post.data.cardImage.src}
                    alt={post.data.title}
                    class="w-full h-96 object-cover transform transition-all duration-300 group-hover:scale-105 group-hover:grayscale"
                  />
                  {/* Author and Date Inside the Image */}
                  <div class="absolute top-4 left-4 flex items-center space-x-4">
                    {post.data.authorImage && (
                      <img
                        src={post.data.authorImage.src}
                        alt={post.data.author}
                        class="w-12 h-12 rounded-full border-2 border-white"
                      />
                    )}
                    <div class="text-white">
                      <p>{post.data.author}</p>
                      <p class="text-sm">10 Feb 2025</p>
                    </div>
                  </div>
                  {/* Title Below the Author and Date */}
                  <div class="absolute bottom-4 left-4 right-4">
                    <h2 class="text-xl text-white mb-2">
                      {post.data.title}
                    </h2>
                  </div>
                </div>
              )}
            </div>
          </a>
        ))
      }
    </div>
  </div>
</Layout>
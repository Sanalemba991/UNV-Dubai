---
import Layout from "../../layouts/Layout.astro";
import { getCollection } from "astro:content"; // Import getCollection from Astro

// Fetch products dynamically from the 'laptop' collection
const allProducts = await getCollection("laptop");

// Limit the products to two if needed (or set the limit as per your requirement)
const products = allProducts.slice(0, 2); // You can adjust the limit here if needed
---

<Layout>
  <html lang="en">
    <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Products Blog with Hero</title>
      <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet"
      />
      <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      />
    </head>
    <body class="bg-gray-50 font-sans">
      <!-- Hero Section with Animated Background -->
      <div
        class="relative overflow-hidden bg-gradient-to-r from-blue-600 to-indigo-700"
      >
        <div class="absolute inset-0">
          <div class="absolute inset-0 bg-blue-600 opacity-50"></div>
          <div
            class="absolute inset-0 bg-[url('/images/dot-pattern.png')] opacity-10"
          >
          </div>
        </div>
        <div class="relative py-24 px-4 text-center text-white">
          <div class="max-w-2xl mx-auto">
            <h1 class="text-5xl font-bold mb-6 leading-tight">
              Insights & Inspiration
            </h1>
            <p class="text-xl">
              Discover the latest trends, techniques, and stories from the world
              of design and creativity.
            </p>
            <div class="mt-10">
              <a
                href="#blog"
                class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-indigo-700 bg-white hover:bg-gray-50 transition duration-300 shadow-lg hover:shadow-xl"
              >
                Browse Products
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5 ml-2"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 9l-7 7-7-7"></path>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Product Grid -->
      <div id="blog" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
        <div class="mb-12 text-center">
          <h2 class="text-3xl font-bold text-gray-900 mb-4">Latest Products</h2>
          <div class="w-24 h-1 bg-blue-600 mx-auto"></div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10">
          {
            products.map((product) => (
              <div class="group bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:scale-105">
                <div class="relative h-56 overflow-hidden">
                  <img
                    src={product.data.imageCard?.src}
                    alt={product.data.title || "Product Image"}
                    class="w-11/12 h-11/12 object-cover transition duration-300 mx-auto"
                  />
                  <div class=" group-hover:opacity-100 transition duration-300" />
                </div>

                <div class="p-6">
                  <h2 class="text-xl font-semibold mb-4 group-hover:text-blue-600 transition-colors duration-300">
                    <a href={`/products/${product.slug}`}>
                      {product.data.title}
                    </a>
                  </h2>

                  <div class="flex justify-between items-center mt-6">
                    <a
                      href={`/laptop/${product.slug}`}
                      class="inline-flex items-center px-5 py-2.5 rounded-lg bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-medium text-sm hover:from-blue-600 hover:to-indigo-700 transition duration-300 shadow-md hover:shadow-xl transform hover:-translate-y-1"
                    >
                      Read More
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-4 w-4 ml-2"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M14 5l7 7m0 0l-7 7m7-7H3"
                        />
                      </svg>
                    </a>

                    <button class="p-2 rounded-full text-gray-400 hover:text-blue-600 hover:bg-blue-50 transition duration-300">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-5 w-5"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"
                        />
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </body>
  </html>
</Layout>

<style>
  /* Smooth scrolling */
  html {
    scroll-behavior: smooth;
  }
</style>
